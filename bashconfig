UNAME=`uname -s`

stty -ixon
bind -r '\C-s'

# Source all files in the ~/.dotmods/bash/autoload directory
for f in ~/.dotmods/bash/autoload/*; do source $f; done

# Set PATH
export PATH=$(~/.dotmods/bin/get-paths | tr '\n' ':')

# Set aliases
while read LINE; do eval "alias $LINE"; done < <(get-aliases =)

# Set PS1 to ~/.dotmods/bin/echo-ps1
export PROMPT_COMMAND="export PS1=\$(~/.dotmods/bin/echo-ps1 \$?)"

function cd() { builtin cd "$@" && npm_chpwd_hook; }

function npm_chpwd_hook() {
  NPMPATH="$(npm bin)"

  if [ -d "$NPMPATH" ]; then
    PATH=$NPMPATH:$PRENPMPATH
  else
    PATH=$PRENPMPATH
  fi

  export PATH=$PATH
}

# Base16 Shell
BASE16_SHELL="$HOME/.config/base16-shell/base16-solarized.dark.sh"
[[ -s $BASE16_SHELL ]] && source $BASE16_SHELL

if [ -e /home/seanstrom/.nix-profile/etc/profile.d/nix.sh ]; then . /home/seanstrom/.nix-profile/etc/profile.d/nix.sh; fi # added by Nix installer

# export PKG_CONFIG_PATH=/usr/local/opt/libffi/lib/pkgconfig
export PRENPMPATH=$PATH
npm_chpwd_hook
